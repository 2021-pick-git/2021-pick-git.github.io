<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Spring REST Docs ì ìš© (Gradle 7) - BingheCompany ğŸ‡°ğŸ‡·</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="BingheCompany ğŸ‡°ğŸ‡·" property="og:site_name">
  
    <meta content="Spring REST Docs ì ìš© (Gradle 7)" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="APIë¥¼ ë¬¸ì„œí™”í•´ë´…ì‹œë‹¤." property="og:description">
  
  
    <meta content="https://2021-pick-git.github.io//spring-rest-docs/" property="og:url">
  
  
    <meta content="2021-09-28T19:32:20+09:00" property="article:published_time">
    <meta content="https://2021-pick-git.github.io//about/" property="article:author">
  
  
    <meta content="https://2021-pick-git.github.io//assets/img/restdocs.png" property="og:image">
  
  
    
  
  
    
    <meta content="ë°±ì—”ë“œ" property="article:tag">
    
    <meta content="Spring" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="Spring REST Docs ì ìš© (Gradle 7)">
  
  
    <meta name="twitter:url" content="https://2021-pick-git.github.io//spring-rest-docs/">
  
  
    <meta name="twitter:description" content="APIë¥¼ ë¬¸ì„œí™”í•´ë´…ì‹œë‹¤.">
  
  
    <meta name="twitter:image:src" content="https://2021-pick-git.github.io//assets/img/restdocs.png">
  

	<meta name="description" content="APIë¥¼ ë¬¸ì„œí™”í•´ë´…ì‹œë‹¤.">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700|Lato:300,400,700&display=swap" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/mark.jpg" alt="ê¹ƒ-ë“¤ë‹¤ (pick-git)"></a>
      </div>
      <div class="author-name">ê¹ƒ-ë“¤ë‹¤ (pick-git)</div>
      <p>ê¹ƒ-ë“¤ë‹¤ ê¸°ìˆ  ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.</br>ğŸ˜‡ğŸ’ª</br> This is a tech blog for pick-git.</br> ãƒ”ã‚¯ã‚®ãƒˆã®æŠ€è¡“ã®blogã§ã™ã€‚</br> è¿™æ˜¯ pick-git ç§‘æŠ€åšå®¢.</br></p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        <!-- 
          <li><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li><a href="https://facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
         -->
        
          <li class="github"><a href="http://github.com/woowacourse-teams/2021-pick-git" target="_blank"><i class="fa fa-github"></i></a></li>
        
        <!-- 
          <li class="linkedin"><a href="https://in.linkedin.com/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
        
        
          <li class="email"><a href="mailto:example.david@blog.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></li>
         -->
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2021 &copy; ê¹ƒ-ë“¤ë‹¤ (pick-git)</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/assets/img/restdocs.png alt="Spring REST Docs ì ìš© (Gradle 7)">
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Spring REST Docs ì ìš© (Gradle 7)</h1>
        <div class="page-date"><span>2021, Sep 28&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <h2 id="1-spring-rest-docs">1. Spring REST Docs</h2>

<p>ì•ˆë…•í•˜ì„¸ìš”, ì¼€ë¹ˆì…ë‹ˆë‹¤. Pick-Git ì„œë¹„ìŠ¤ ê°œë°œ ì´ˆê¸°ì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œ íŒ€ì›ë“¤ê³¼ API ìŠ¤í™ í˜‘ì˜ í›„ Notionì— ì‘ì„±í•´ì„œ ê³µìœ í–ˆì—ˆëŠ”ë°ìš”. í•´ë‹¹ ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ë¬¸ì œì ì´ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤. ìˆ˜ê¸°ë¡œ ì‘ì„±í•˜ë‹¤ ë³´ë‹ˆ ì¸ì  ì‹¤ìˆ˜ë¡œ ì¸í•´ ì˜¤ê¸°ì¬ í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. ë˜í•œ ê°œë°œ ê³¼ì •ì—ì„œ API ìŠ¤í™ ë³€ê²½ì´ ë§¤ìš° ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ ë¯¸ê¸°ì¬í•˜ëŠ” ì‹¤ìˆ˜ë¡œ ì¸í•´ ì¼ì •ì— ì°¨ì§ˆì´ ì¢…ì¢… ìƒê¸°ê³¤ í–ˆìŠµë‹ˆë‹¤.</p>

<p>íŒ€ì› ëª¨ë‘ ì¡°ê¸ˆ ë” ê·œê²©í™”ëœ API ë¬¸ì„œí™”ì˜ ë„ì…ì˜ í•„ìš”ì„±ì„ ëŠê¼ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ íŒ€ì´ ì„ íƒí•œ ë„êµ¬ëŠ” Spring Rest Docsì…ë‹ˆë‹¤. Spring REST DocsëŠ” RESTful ì„œë¹„ìŠ¤ì˜ ë¬¸ì„œí™”ë¥¼ ë„ì™€ì£¼ëŠ” ë„êµ¬ì¸ë°ìš”. ë¬¸ì„œ ì‘ì„± ë„êµ¬ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ Asciidoctorë¥¼ ì‚¬ìš©í•˜ê³ , ì´ë¥¼ í†µí•´ ìµœì¢…ì ìœ¼ë¡œ HTMLì„ ìƒì„±í•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ Markdownì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì „ë°˜ì ì¸ íë¦„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>Spring MVC Test, Spring WebFlux WebTestClient, RestAssured ë“±ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</li>
  <li>í•´ë‹¹ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ Snippetì´ ìë™ ìƒì„±ëœë‹¤.</li>
  <li>ì‚¬ìš©ìê°€ ë¯¸ë¦¬ ì‘ì„±í•´ë‘” í…œí”Œë¦¿ ë¬¸ì„œì™€ Snippetì„ ê²°í•©í•´ ìµœì¢…ì ì¸ API ë¬¸ì„œë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.</li>
</ul>

<h3 id="11-swagger-ëŒ€ë¹„-ì¥ì ">1.1. Swagger ëŒ€ë¹„ ì¥ì </h3>

<p>ë¹„ìŠ·í•œ ëŒ€ì•ˆìœ¼ë¡œ Swaggerê°€ ìˆìŠµë‹ˆë‹¤. ì´ ë˜í•œ ì‰½ê²Œ APIë¥¼ ë¬¸ì„œí™”í•  ìˆ˜ ìˆëŠ”ë°ìš”. íŠ¹íˆ SwaggerëŠ” API ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° íŠ¹í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ SwaggerëŠ” í”„ë¡œë•ì…˜ ì½”ë“œì— ì• ë„ˆí…Œì´ì…˜ì„ ë¶€ì°©í•˜ëŠ” ë“± ì½”ë“œ ì¹¨íˆ¬ë¼ëŠ” ë‹¨ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<p>ë°˜ë©´ Spring REST DocsëŠ” í”„ë¡œë•ì…˜ ì½”ë“œì— ë³„ë‹¤ë¥¸ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•„ìš¸ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ë©°, Snippetì´ ì˜¬ë°”ë¥´ì§€ ì•Šì„ ê²½ìš° í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ê°•ì œí•˜ë©°, í…ŒìŠ¤íŠ¸ê°€ ê²€ì¦ë˜ë©´ ì‘ì„±ë˜ëŠ” ë¬¸ì„œ ë˜í•œ ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="2-ì„¤ì •">2. ì„¤ì •</h2>

<blockquote>
  <p>log</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Some problems were found with the configuration of task <span class="s1">':asciidoctor'</span> <span class="o">(</span><span class="nb">type</span> <span class="s1">'AsciidoctorTask'</span><span class="o">)</span><span class="nb">.</span>
  - In plugin <span class="s1">'org.asciidoctor.convert'</span> <span class="nb">type</span> <span class="s1">'org.asciidoctor.gradle.AsciidoctorTask'</span> method <span class="s1">'asGemPath()'</span> should not be annotated with: @Optional, @InputDirectory.
</code></pre></div></div>

<p>ì„¤ì •ì„ ìœ„í•´ ê³µì‹ ë¬¸ì„œì— ê¸°ìˆ ëœ ë°©ë²•ì„ ì°¸ê³ í–ˆìœ¼ë‚˜ ìœ„ ì—ëŸ¬ì— ê³„ì† ì§ë©´í–ˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="n">id</span> <span class="s1">'org.asciidoctor.jvm.convert'</span> <span class="n">version</span> <span class="s1">'3.3.2'</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Gradle 7 ë¶€í„°ëŠ” <code class="language-plaintext highlighter-rouge">org.asciidoctor.convert</code>ê°€ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">asciidoctor.jvm.convert</code>ë¥¼ ì‚¬ìš©í•œë‹¤ê³  í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">testImplementation</span> <span class="s1">'org.springframework.restdocs:spring-restdocs-mockmvc'</span>
<span class="o">}</span>
</code></pre></div></div>

<p>REST Docsë¥¼ RestAssured í˜¹ì€ WebTestClientë¡œ ì‘ì„±í•˜ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">spring-restdocs-webtestclient</code> í˜¹ì€ <code class="language-plaintext highlighter-rouge">spring-restdocs-restassured</code>ë¡œ êµì²´í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ext</span> <span class="o">{</span>
    <span class="n">snippetsDir</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s1">'build/generated-snippets'</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">test</span> <span class="o">{</span>
    <span class="n">outputs</span><span class="o">.</span><span class="na">dir</span> <span class="n">snippetsDir</span>
    <span class="nf">useJUnitPlatform</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">asciidoctor</span> <span class="o">{</span>
    <span class="n">inputs</span><span class="o">.</span><span class="na">dir</span> <span class="n">snippetsDir</span>
    <span class="n">dependsOn</span> <span class="n">test</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Gradle ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì§€ë§Œ ì•Œì•„ë‘ë©´ ì¢‹ì€ ê°œë…ë“¤ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dependsOn</code> : íŠ¹ì • Taskê°€ ì˜ì¡´í•˜ëŠ” Taskë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.
    <ul>
      <li>ì¦‰, <code class="language-plaintext highlighter-rouge">asciidoctor</code> TaskëŠ” ì˜ì¡´í•˜ëŠ” <code class="language-plaintext highlighter-rouge">test</code> Task ì´í›„ì— ìˆ˜í–‰ë©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">finalizedBy</code> : íŠ¹ì • Taskì˜ í›„í–‰ Taskë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">asciidoctor</code> Taskì— <code class="language-plaintext highlighter-rouge">finalizedBy copy</code>ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìœ¼ë©´, <code class="language-plaintext highlighter-rouge">asciidoctor</code> Task ì´í›„ copy Taskê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ext</span> <span class="o">{</span>
    <span class="n">snippetsDir</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s1">'build/generated-snippets'</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìƒì„±ëœ ìŠ¤ë‹ˆí«ì˜ ì €ì¥ ìœ„ì¹˜ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test</span> <span class="o">{</span>
    <span class="n">outputs</span><span class="o">.</span><span class="na">dir</span> <span class="n">snippetsDir</span>
    <span class="nf">useJUnitPlatform</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div></div>

<p>í…ŒìŠ¤íŠ¸ Taskì˜ ì•„ì›ƒí’‹ ë””ë ‰í† ë¦¬ë¥¼ ìŠ¤ë‹ˆí« ì €ì¥ ìœ„ì¹˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asciidoctor</span> <span class="o">{</span>
    <span class="n">inputs</span><span class="o">.</span><span class="na">dir</span> <span class="n">snippetsDir</span>
    <span class="n">dependsOn</span> <span class="n">test</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìŠ¤ë‹ˆí« ì €ì¥ ìœ„ì¹˜ë¥¼ ì¸í’‹ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">asciidoctor</code> TaskëŠ” í…ŒìŠ¤íŠ¸ Task ìˆ˜í–‰ ì´í›„ì— ìˆ˜í–‰ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ë¬¸ì„œê°€ ìƒì„±ë˜ê¸° ì „ì— í…ŒìŠ¤íŠ¸ê°€ ìˆ˜í–‰ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë¬¼ë¡  ê¼­ ì˜ì¡´ì„±ì„ ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ì§€ ì•Šê³  Jenkins Pipelineì—ì„œ Taskë¥¼ ì ë‹¹íˆ ìˆœì„œì— ë§ì¶° ìˆ˜í–‰í•´ë„ ë©ë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="3-í…ŒìŠ¤íŠ¸-ì½”ë“œ-ì‘ì„±">3. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</h2>

<blockquote>
  <p>PostControllerTest.java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// when, then</span>
<span class="nc">ResultActions</span> <span class="n">resultActions</span> <span class="o">=</span> <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/api/posts/{id}"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">))</span>
    <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
    <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">content</span><span class="o">().</span><span class="na">string</span><span class="o">(</span><span class="n">expected</span><span class="o">));</span>

<span class="n">verify</span><span class="o">(</span><span class="n">postService</span><span class="o">,</span> <span class="n">times</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="na">readById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>

<span class="c1">// restDocs</span>
<span class="n">resultActions</span><span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"post-read-one"</span><span class="o">,</span>
    <span class="n">preprocessRequest</span><span class="o">(</span><span class="n">prettyPrint</span><span class="o">()),</span>
    <span class="n">preprocessRequest</span><span class="o">(</span><span class="n">prettyPrint</span><span class="o">()),</span>
    <span class="n">responseFields</span><span class="o">(</span><span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ê²Œì‹œë¬¼ id"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"title"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì œëª©"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"content"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ë‚´ìš©"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"author"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ê¸€ì“´ì´"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"viewCounts"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì¡°íšŒìˆ˜"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"createdDate"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì‘ì„±ì¼"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"modifiedDate"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ìˆ˜ì •ì¼"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"imageUrls"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì‚¬ì§„ ë§í¬"</span><span class="o">)))</span>
<span class="o">);</span>
</code></pre></div></div>

<blockquote>
  <p>MockMvcRestDocumentation</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">RestDocumentationResultHandler</span> <span class="nf">document</span><span class="o">(</span><span class="nc">String</span> <span class="n">identifier</span><span class="o">,</span>
			<span class="nc">OperationRequestPreprocessor</span> <span class="n">requestPreprocessor</span><span class="o">,</span> <span class="nc">OperationResponsePreprocessor</span> <span class="n">responsePreprocessor</span><span class="o">,</span>
			<span class="nc">Snippet</span><span class="o">...</span> <span class="n">snippets</span><span class="o">)</span> <span class="o">{</span>
         <span class="c1">//...</span>
      <span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">andDo()</code>ë©”ì„œë“œì— <code class="language-plaintext highlighter-rouge">document()</code>ë¥¼ ì¶”ê°€í•˜ì—¬ ìŠ¤ë‹ˆí«ì„ ìƒì„±í•©ë‹ˆë‹¤. ê°€ì¥ ì²« ë²ˆì§¸ ì¸ìëŠ” ìŠ¤ë‹ˆí«ì˜ Identifierì…ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">preprocessRequest(prettyPrint())</code>ë¥¼ ë„£ì–´ì£¼ë©´ ìš”ì²­ê³¼ ì‘ë‹µì˜ ë‚´ìš©ì„ í˜•ì‹í™”í•¨ìœ¼ë¡œì¨ ê°€ë…ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">document()</code> ë©”ì„œë“œëŠ” ì˜¤ë²„ë¡œë”©ë˜ì–´ ìˆì–´ì„œ <code class="language-plaintext highlighter-rouge">prettyPrint()</code>ë¥¼ ìš”ì²­, ì‘ë‹µ, ìš”ì²­ ë° ì‘ë‹µ ëª¨ë‘ ë“± ì´ 3ê°€ì§€ì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>Snippetì˜ ê²½ìš° ìš”ì²­ í—¤ë”, ì‘ë‹µ í—¤ë”, ì‘ë‹µ ë³¸ë¬¸ ë°ì´í„° í•„ë“œ ë“± ë‹¤ì–‘í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆëŠ”ë°ìš”. ì‚¬ìš© ì˜ˆì œ ë° ê³µì‹ ë¬¸ì„œë¥¼ ë³´ë©´ì„œ í•™ìŠµí•˜ë©´ ì´í•´ê°€ ë¹ ë¥¼ ê²ƒì…ë‹ˆë‹¤.</p>

<blockquote>
  <p>PostControllerTest.java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// restDocs</span>
<span class="n">resultActions</span><span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"post-read-multiple"</span><span class="o">,</span>
    <span class="n">getDocumentRequest</span><span class="o">(),</span>
    <span class="n">getDocumentResponse</span><span class="o">(),</span>
    <span class="n">responseFields</span><span class="o">(</span><span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].id"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ê²Œì‹œë¬¼ id"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].title"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì œëª©"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].content"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ë‚´ìš©"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].author"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ê¸€ì“´ì´"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].viewCounts"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì¡°íšŒìˆ˜"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].createdDate"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì‘ì„±ì¼"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"simplePostResponses[].modifiedDate"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ìˆ˜ì •ì¼"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"startPage"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì‹œì‘ í˜ì´ì§€"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"endPage"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ë í˜ì´ì§€"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"prev"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ì´ì „ í˜ì´ì§€ ì—¬ë¶€"</span><span class="o">),</span>
        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"next"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ë‹¤ìŒ í˜ì´ì§€ ì—¬ë¶€"</span><span class="o">)))</span>
<span class="o">);</span>
</code></pre></div></div>

<p>Listê°€ í¬í•¨ëœ ì‘ë‹µì€ <code class="language-plaintext highlighter-rouge">[]</code>ë¥¼ í†µí•´ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë§Œì•½ ì‘ë‹µì´ ë‹¨ì¼ ë¦¬ìŠ¤íŠ¸ë§Œì„ í¬í•¨í•˜ê³  ìˆë‹¤ë©´ ì˜ˆì œì™€ ë‹¤ë¥´ê²Œ <code class="language-plaintext highlighter-rouge">[].id</code>, <code class="language-plaintext highlighter-rouge">[].title</code>ê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>PostControllerTest.java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resultActions</span><span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"post-write-login"</span><span class="o">,</span>
    <span class="n">getDocumentRequest</span><span class="o">(),</span>
    <span class="n">getDocumentResponse</span><span class="o">(),</span>
    <span class="n">requestHeaders</span><span class="o">(</span><span class="n">headerWithName</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">AUTHORIZATION</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Bearer token"</span><span class="o">)),</span>
    <span class="n">requestPartBody</span><span class="o">(</span><span class="s">"images"</span><span class="o">),</span>
    <span class="n">responseHeaders</span><span class="o">(</span><span class="n">headerWithName</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">LOCATION</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"ê²Œì‹œë¬¼ ì£¼ì†Œ"</span><span class="o">)))</span>
<span class="o">);</span>
</code></pre></div></div>

<p>í—¤ë” ë˜í•œ ê²€ì¦ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<p><img width="337" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-01 á„‹á…©á„Œá…¥á†« 2 48 32" src="https://user-images.githubusercontent.com/56240505/131551597-ee2fdecf-5633-4420-8214-6dfc2a0bb034.png" /></p>

<p>Gradle ì˜µì…˜ì—ì„œ Testë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤ë‹ˆí«ì´ ìƒì„±ë©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ìƒì„±ëœ ìŠ¤ë‹ˆí«ê³¼ <strong>ì‚¬ìš©ìê°€ ë¯¸ë¦¬ ì‘ì„±í•´ë‘” í…œí”Œë¦¿ ë¬¸ì„œ</strong>ë¥¼ ê²°í•©í•´ ìµœì¢… API HTML ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

<p>ì‚¬ìš©ìê°€ ë¯¸ë¦¬ ì‘ì„±í•´ë‘˜ íŒŒì¼ì€ Gradle ê¸°ì¤€ <code class="language-plaintext highlighter-rouge">src/docs/asciidoc</code>ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. ì´ ë•Œ íŒŒì¼ í™•ì¥ìëŠ” <code class="language-plaintext highlighter-rouge">.adoc</code>ì…ë‹ˆë‹¤.</p>

<blockquote>
  <p>api.adoc</p>
</blockquote>

<pre><code class="language-adoc">ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]

== User
=== íšŒì›íƒˆí‡´ (ë¹„ë¡œê·¸ì¸)
==== Request
include::{snippets}/withdraw-not-login/http-request.adoc[]
==== Response
include::{snippets}/withdraw-not-login/http-response.adoc[]

=== íšŒì›íƒˆí‡´ (ë¡œê·¸ì¸)
=== ê²Œì‹œë¬¼ ë‹¨ê±´ ì¡°íšŒ
==== Request
include::{snippets}/post-read-one/http-request.adoc[]
==== Response
include::{snippets}/post-read-one/http-response.adoc[]
==== Fields
include::{snippets}/post-read-one/response-fields.adoc[]
</code></pre>

<p>ì •ì  ë¸”ë¡œê·¸ë¥¼ ê¾¸ë¯¸ë“¯ì´ API ë¬¸ì„œ ë˜í•œ ì¡°ê¸ˆë§Œ ë” ë…¸ë ¥ì„ ë“¤ì´ë©´ ë§¤ìš° ì•„ë¦„ë‹µê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ê°ê°ì˜ ìŠ¤ë‹ˆí« identifier í´ë” í•˜ìœ„ì—ëŠ” ì²¨ë¶€í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ adocë“¤ì´ ì¡´ì¬í•˜ëŠ”ë°, ìƒí™©ì— ë§ê²Œ ì˜ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bootJar</span> <span class="o">{</span>
    <span class="n">dependsOn</span> <span class="n">asciidoctor</span>
    <span class="n">copy</span> <span class="o">{</span>
        <span class="n">from</span> <span class="s2">"${asciidoctor.outputDir}"</span>
        <span class="n">into</span> <span class="s1">'BOOT-INF/classes/static/docs'</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>í•´ë‹¹ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ê³ , ì´ë²ˆì—ëŠ” Gradle ì˜µì…˜ì—ì„œ bootJarë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤.</p>

<p><img width="324" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-01 á„‹á…©á„Œá…¥á†« 2 59 33" src="https://user-images.githubusercontent.com/56240505/131552947-69d0a451-1da1-41fb-a690-30e16a6cbc42.png" /></p>

<p>bootJarë¥¼ ì‹¤í–‰í•˜ë©´ <code class="language-plaintext highlighter-rouge">src/docs/asciidoc</code>ì— ìœ„ì¹˜ì‹œí‚¨ ì‚¬ìš©ìê°€ ì •ì˜í•œ adoc íŒŒì¼ê³¼ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ìƒì„±ëœ ìŠ¤ë‹ˆí«ë“¤ì´ ì¡°í•©ëœ ìµœì¢… API ë¬¸ì„œê°€ <code class="language-plaintext highlighter-rouge">build/docds/asciidoc</code> ë””ë ‰í† ë¦¬ì— ìƒì„±ë©ë‹ˆë‹¤.</p>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bootJar</span> <span class="o">{</span>
    <span class="n">dependsOn</span> <span class="n">asciidoctor</span>
    <span class="n">copy</span> <span class="o">{</span>
        <span class="n">from</span> <span class="s2">"${asciidoctor.outputDir}"</span>
        <span class="n">into</span> <span class="s1">'BOOT-INF/classes/static/docs'</span>
    <span class="o">}</span>
    <span class="n">finalizedBy</span> <span class="s1">'copyDocument'</span>
<span class="o">}</span>

<span class="n">task</span> <span class="nf">copyDocument</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dependsOn</span> <span class="n">bootJar</span>
    <span class="n">from</span> <span class="nf">file</span><span class="o">(</span><span class="s2">"build/docs/asciidoc"</span><span class="o">)</span>
    <span class="n">into</span> <span class="nf">file</span><span class="o">(</span><span class="s2">"src/main/resources/static/docs"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>bootJar Taskë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">api.html</code>ì´ ìƒì„±ë˜ë©´, í›„í–‰ Taskë¡œ copyDocumentê°€ ì‹¤í–‰ë˜ë„ë¡ í•©ì‹œë‹¤. copyDocumentê°€ ìˆ˜í–‰ë˜ë©´ classpath(resources)ë¡œ API ë¬¸ì„œê°€ ë³µì‚¬ë©ë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/56240505/131554209-8727e655-12b7-4e7e-b811-ab9507fd0416.png" alt="image" /></p>

<p><img src="https://user-images.githubusercontent.com/56240505/131554295-6907e473-0694-47ef-9572-e65eecae3a17.png" alt="image" /></p>

<p>bootJarë¡œ ì‹¤í–‰í•˜ë©´ ì»´íŒŒì¼ì„ ê±°ì¹˜ê³  í…ŒìŠ¤íŠ¸ Taskê°€ ì‹œì‘ë©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ Taskê°€ ì¢…ë£Œë˜ë©´ ì˜ì¡´ ê´€ê³„ì— ë”°ë¼ asciidoctor, bootJar, copyDocument Taskê°€ ê°ê° ì‹¤í–‰ë©ë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/56240505/131554549-9c6978bf-f20b-4e84-967f-72d43469deb9.png" alt="image" /></p>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ì˜ ì ‘ì†ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><br /></p>

<h2 id="3-ê¸°íƒ€">3. ê¸°íƒ€</h2>

<blockquote>
  <p>build.gradle</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asciidoctor</span><span class="o">.</span><span class="na">doFirst</span> <span class="o">{</span>
    <span class="n">delete</span> <span class="nf">file</span><span class="o">(</span><span class="s1">'src/main/resources/static/docs'</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë§Œì•½ ë¬¸ì„œì— ìˆ˜ì •ì´ ë°œìƒí–ˆìŒì—ë„ ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‹¤ìŒ íƒœìŠ¤í¬ë¥¼ ì¶”ê°€í•˜ì—¬ ë³µì‚¬ ì´ì „ì— ê¸°ì¡´ì— ìˆë˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ API ë¬¸ì„œë¥¼ ì œê±°í•˜ë„ë¡ í•©ì‹œë‹¤.</p>

<p><br /></p>

<hr />

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="https://docs.spring.io/spring-restdocs/docs/current/reference/html5/">Spring REST Docs</a></li>
  <li><a href="https://velog.io/@max9106/Spring-Spring-rest-docs%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%AC%B8%EC%84%9C%ED%99%94">[Spring] Spring rest docs ì ìš©ê¸°(gradle 7.0.2)</a></li>
  <li><a href="https://stackoverflow.com/questions/68539790/configuring-asciidoctor-when-using-spring-restdoc">Configuring asciidoctor when using Spring Restdoc</a></li>
</ul>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Spring REST Docs ì ìš© (Gradle 7)&url=https://2021-pick-git.github.io//spring-rest-docs/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=https://2021-pick-git.github.io//spring-rest-docs/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=https://2021-pick-git.github.io//spring-rest-docs/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#ë°±ì—”ë“œ" class="tag">&#35; ë°±ì—”ë“œ</a>
          
            <a href="/tags#Spring" class="tag">&#35; Spring</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->

  <script src="https://utteranc.es/client.js"
        repo="2021-pick-git/pick-git-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
